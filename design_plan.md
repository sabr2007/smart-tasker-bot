# Smart Tasker — Product Polish Design

Дизайн-документ для превращения бота из "рабочего проекта" в "полноценный продукт".

## Цели

1. Единый стиль и характер во всех точках контакта
2. Оптимизация скорости WebApp
3. "Живой" помощник с характером, но без болтливости
4. Убрать ощущение "проекта первокурсника"

---

## 1. Характер и голос бота

### Личность

**Имя:** Smart Tasker

**Кто он:** Уверенный помощник, который в курсе твоих дел. Не холодный робот, но и не надоедливый друг. Говорит по делу, но с теплотой.

### Принципы общения

- Краткость: максимум 2-3 предложения в обычных ответах
- Контекст: иногда добавляет полезную информацию ("У тебя уже 2 задачи на это время")
- Без Markdown, но с эмодзи (умеренно, системно)
- Обращение на "ты"

### Примеры тона

| Было | Стало |
|------|-------|
| "Задача создана (ID 15): 'Купить молоко' с дедлайном 15.01 10:00" | "Добавил: Купить молоко → завтра в 10:00 ✓" |
| "У пользователя нет активных задач." | "Задач нет — отдыхай! 🏝" |
| "Задача 'Встреча' отмечена как выполненная ✓" | "Готово ✓ Осталось 3 задачи на сегодня" |
| "⏰ Напоминание:\n\n{текст}\n\nЕсли хочешь задачу отложить..." | "⏰ Встреча через 10 минут!\n\n→ Выполнить или отложить?" |

### Система эмодзи

| Эмодзи | Значение |
|--------|----------|
| ✓ | Успешное действие |
| ⏰ | Напоминание |
| 📋 | Список задач |
| 🏝 | Нет задач |
| ⚡ | Срочное/просроченное |
| 🔗 | Есть ссылка |
| 📞 | Есть телефон |
| 📎 | Есть вложение |
| 🔁 | Повторяющаяся задача |

---

## 2. UI бота (Telegram)

### Главная клавиатура

Упрощаем с двух кнопок до одной:

```
┌─────────────────────────┐
│    📋 Панель задач      │  ← Открывает WebApp
└─────────────────────────┘
```

Быстрый список через текст: "задачи", "что на сегодня" и т.д.

### Компактный формат списка задач (в чате)

```
📋 Сегодня (3):

1. Купить молоко → 10:00
2. Созвон с командой → 15:00 🔗
3. Отправить отчёт → 18:00 📎

Скоро (2):
4. Встреча с заказчиком → завтра 12:00
5. Оплатить счёт → пт

—
Управляй в Панели задач
```

### Кнопки напоминаний

Было: `[Выполнено ✅] [Отложить ⏳]` → потом выбор времени

Стало (один клик = действие):
```
[Готово ✓] [+15 мин] [+1 час] [Завтра]
```

### Формат напоминания

```
⏰ Созвон с командой

→ через 5 минут
🔗 meet.google.com/abc

[Готово ✓] [+15 мин] [+1 час] [Завтра]
```

Если есть ссылка — показываем кликабельно.
Если есть телефон — показываем с иконкой 📞.
Если есть файл — кнопка "Открыть файл".

---

## 3. WebApp — Главный экран

### Структура

```
┌────────────────────────────────┐
│  Доброе утро! ☀️               │  ← Приветствие по времени
│  Сегодня 3 задачи              │
├────────────────────────────────┤
│  ▔▔▔▔▔▔▔▔▔▔▔▔▔▔▔▔▔▔░░░░  75%  │  ← Прогресс дня
├────────────────────────────────┤
│  🚨 ПРОСРОЧЕНО                 │
│  ┌──────────────────────────┐  │
│  │ ○ Оплатить счёт     вчера│  │
│  └──────────────────────────┘  │
│                                │
│  📅 СЕГОДНЯ                    │
│  ┌──────────────────────────┐  │
│  │ ○ Купить молоко    10:00 │  │
│  │ ○ Созвон 🔗        15:00 │  │
│  │ ● Отчёт ✓          18:00 │  │
│  └──────────────────────────┘  │
│                                │
│  🔜 СКОРО                      │
│  ┌──────────────────────────┐  │
│  │ ○ Встреча 📞    завтра   │  │
│  │ ○ Дедлайн 📎    пт       │  │
│  └──────────────────────────┘  │
├────────────────────────────────┤
│   [Задачи]      [Календарь]    │
└────────────────────────────────┘
```

### Приветствия по времени суток

| Время | Текст |
|-------|-------|
| 05:00–11:59 | Доброе утро! ☀️ |
| 12:00–17:59 | Добрый день! 👋 |
| 18:00–22:59 | Добрый вечер! 🌙 |
| 23:00–04:59 | Не спится? 🦉 |

### Прогресс-бар

- Показывает % выполненных задач за сегодня
- Анимированный при завершении задачи
- Если 100% → "Всё сделано! 🎉"

### Иконки в задачах

| Иконка | Значение | Действие по клику |
|--------|----------|-------------------|
| 🔗 | Есть URL | Открывает ссылку |
| 📞 | Есть телефон | Инициирует звонок |
| 📎 | Есть файл | Показывает файл |
| 🔁 | Повторяющаяся | — |

### Микро-анимации

- Чекбокс: плавное заполнение + галочка появляется
- Задача выполнена: мягко уходит вниз в "Выполненные"
- Карточки: `transform: scale(0.98)` при нажатии

---

## 4. WebApp — Настройки

### Структура меню

```
┌────────────────────────────────┐
│  ←  Настройки                  │
├────────────────────────────────┤
│  ┌──────────────────────────┐  │
│  │ 🌍 Часовой пояс          │  │
│  │    Алматы (UTC+5)      › │  │
│  └──────────────────────────┘  │
│                                │
│  ┌──────────────────────────┐  │
│  │ 📦 Архив                 │  │
│  │    12 выполненных      › │  │
│  └──────────────────────────┘  │
│                                │
│  ┌──────────────────────────┐  │
│  │ 💡 Как пользоваться    › │  │
│  └──────────────────────────┘  │
├────────────────────────────────┤
│  Smart Tasker v2.2             │
│  Made with ❤️ in Kazakhstan    │
└────────────────────────────────┘
```

### Часовой пояс — отдельный экран

```
┌────────────────────────────────┐
│  ←  Часовой пояс               │
├────────────────────────────────┤
│  🔍 Поиск...                   │
│                                │
│  ПОПУЛЯРНЫЕ                    │
│  ┌──────────────────────────┐  │
│  │ ○ Алматы (UTC+5)         │  │
│  │ ● Москва (UTC+3)      ✓  │  │
│  │ ○ Ташкент (UTC+5)        │  │
│  └──────────────────────────┘  │
│                                │
│  ВСЕ                           │
│  ┌──────────────────────────┐  │
│  │ ○ Лондон (UTC+0)         │  │
│  │ ○ Берлин (UTC+1)         │  │
│  │ ...                      │  │
│  └──────────────────────────┘  │
└────────────────────────────────┘
```

Выбор = автосохранение. Без кнопки "Сохранить".

### Инструкция — карточки

```
┌────────────────────────────────┐
│  ←  Как пользоваться           │
├────────────────────────────────┤
│  ┌──────────────────────────┐  │
│  │  💬 Пиши как думаешь     │  │
│  │  "Напомни купить хлеб    │  │
│  │   завтра в 18:00"        │  │
│  └──────────────────────────┘  │
│                                │
│  ┌──────────────────────────┐  │
│  │  🎤 Голосовые            │  │
│  │  Диктуй список дел —     │  │
│  │  я сам разберу           │  │
│  └──────────────────────────┘  │
│                                │
│  ┌──────────────────────────┐  │
│  │  📸 Фото и PDF           │  │
│  │  Скинь скриншот или      │  │
│  │  билет — вытащу даты     │  │
│  └──────────────────────────┘  │
│                                │
│  ┌──────────────────────────┐  │
│  │  ✏️ Управление           │  │
│  │  Жми на задачу чтобы     │  │
│  │  изменить или удалить    │  │
│  └──────────────────────────┘  │
└────────────────────────────────┘
```

### Архив — группировка по дням

```
┌────────────────────────────────┐
│  ←  Архив            [Очистить]│
├────────────────────────────────┤
│  СЕГОДНЯ                       │
│  ┌──────────────────────────┐  │
│  │ ✓ Купить молоко    10:32 │  │
│  │ ✓ Созвон           15:45 │  │
│  └──────────────────────────┘  │
│                                │
│  ВЧЕРА                         │
│  ┌──────────────────────────┐  │
│  │ ✓ Отправить отчёт  18:20 │  │
│  └──────────────────────────┘  │
│                                │
│  РАНЕЕ                         │
│  ┌──────────────────────────┐  │
│  │ ✓ Встреча      12 янв    │  │
│  │ ✓ Оплата       10 янв    │  │
│  └──────────────────────────┘  │
└────────────────────────────────┘
```

Показывается время выполнения, не дедлайн.

---

## 5. Техническая оптимизация

### Проблемы скорости WebApp

| Сейчас | Проблема |
|--------|----------|
| CDN Vue (40KB) | Внешний запрос |
| CDN Lucide (200KB) | Огромный размер |
| `lucide.createIcons()` | Тормозит каждый рендер |
| Google Fonts (20KB) | Дополнительный запрос |

### Решение

| Было | Стало |
|------|-------|
| CDN Vue (40KB) | Локальный бандл |
| CDN Lucide (200KB) | 12 inline SVG (~5KB) |
| Google Fonts (20KB) | Системные шрифты |
| **~260KB + 4 запроса** | **~50KB + 1 запрос** |

### Системные шрифты

```css
font-family: -apple-system, BlinkMacSystemFont,
             "Segoe UI", Roboto, sans-serif;
```

### Необходимые иконки (inline SVG)

1. `check` — чекбокс
2. `clock` — время
3. `calendar` — календарь
4. `settings` — настройки
5. `chevron-left` — назад
6. `chevron-right` — вперёд
7. `link` — ссылка
8. `phone` — телефон
9. `paperclip` — вложение
10. `repeat` — повторение
11. `archive` — архив
12. `trash` — удаление
13. `x` — закрыть

### CSS анимации

```css
/* Чекбокс */
.checkbox {
  transition: all 0.2s ease;
}
.checkbox.done {
  transform: scale(1.1);
}

/* Карточка задачи */
.task-item {
  transition: transform 0.15s, opacity 0.15s;
}
.task-item:active {
  transform: scale(0.98);
}

/* Прогресс-бар */
.progress-fill {
  transition: width 0.4s ease-out;
}
```

### Цветовая система

Используем переменные Telegram темы (уже реализовано):

| Назначение | Переменная |
|------------|------------|
| Фон | `--tg-theme-bg-color` |
| Карточки | `--tg-theme-secondary-bg-color` |
| Текст | `--tg-theme-text-color` |
| Акцент | `--tg-theme-button-color` |
| Ошибка | `--tg-theme-destructive-text-color` |
| Приглушённый | `--tg-theme-hint-color` |

---

## 6. Изменения в базе данных

### Новое поле: телефон

Добавить поле `phone` в таблицу `tasks` (аналогично `link_url`):

```sql
ALTER TABLE tasks ADD COLUMN phone VARCHAR(20);
```

Агент должен уметь извлекать телефон из сообщения и сохранять отдельно.

---

## 7. План реализации

### Фаза 1: Бот (характер и UI)
- [ ] Обновить системный промпт (новый тон)
- [ ] Изменить форматирование ответов агента
- [ ] Упростить главную клавиатуру (одна кнопка)
- [ ] Переделать кнопки напоминаний (один ряд)
- [ ] Обновить формат сообщения напоминания
- [ ] Добавить поддержку телефона в задачах

### Фаза 2: WebApp — Оптимизация
- [ ] Заменить CDN на локальные файлы
- [ ] Заменить Lucide на inline SVG
- [ ] Убрать Google Fonts
- [ ] Убрать `lucide.createIcons()`

### Фаза 3: WebApp — Новый дизайн
- [ ] Добавить приветствие по времени суток
- [ ] Добавить прогресс-бар
- [ ] Добавить иконки 🔗 📞 📎 🔁 в задачи
- [ ] Переделать настройки (новая структура)
- [ ] Переделать выбор часового пояса
- [ ] Переделать инструкцию (карточки)
- [ ] Переделать архив (группировка по дням)

### Фаза 4: Полировка
- [ ] Добавить микро-анимации
- [ ] Тестирование на разных устройствах
- [ ] Финальная проверка тона сообщений

---

## Дата создания

2026-01-11

## Автор

Brainstorming session с Claude
